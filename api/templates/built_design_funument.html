<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.7: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 6253 2010-03-02 00:24:53Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<div class="section" id="overview">
<h1>Overview</h1>
<p>Jaiku is a multi-channel, low overhead social presence sharing and messaging
web service and platform. How's that for a mouthful. It takes so many words
because it exists in a new area that is still ill-defined as
&quot;microblogging,&quot; an area most popularly categorized as &quot;twitter-like&quot; which
already requires its own sets of definitions. But it's better than that, so
let's try again...</p>
<p>Jaiku is a platform for ubiquitous social computing whose usability goals
are focused in two areas that are really just one: inter-human communication
through short messages and rich context around similar types of
communication. Two areas because most provide the first without regard to
the second, one area because we believe that the first cannot be social
without the second.</p>
<p>Usage of Jaiku in its rich form results in an increased quality of
interaction, an awareness of the context surrounding conversation or actions
on a subconscious level that has been well-described as &quot;social peripheral
vision.&quot; It provides the user with information about her surroundings
without requiring conscious effort to absorb, resulting in reduced anxiety
around social situations (is this person busy? should I call later?) as well
as an increased effectiveness by decreasing the number of direct connections
required to be made to acquire or organize information for any decision
involving multiple people. Information at your fingertips. And how!</p>
<p>How do we accomplish this computer assisted upgrade to social interaction?
Thought you'd never ask...</p>
<p>Let's break the system into some suitably vague sounding sections: The
Faces, The Tangled Web and The Grumpy Troll. Those equate roughly to
something like the frontend, the data model and the backend.</p>
<div class="section" id="the-faces">
<h2>The Faces</h2>
<p>Jaiku accepts user input in a lot of different ways but they are organized
more or less hierarchically.</p>
<div class="figure">
<img alt="http://jaikuengine.googlecode.com/svn/trunk/doc/the_faces.png" src="http://jaikuengine.googlecode.com/svn/trunk/doc/the_faces.png" />
<p class="caption">Fig 2.1 - The Faces</p>
</div>
<div class="section" id="the-abstract-api">
<h3>The Abstract API</h3>
<p>This is the base of the tree, the foundation for our madness and the
metaphors we use to interact with the system.</p>
<div class="section" id="general-design">
<h4>General Design</h4>
<blockquote>
<ul class="simple">
<li>Use the same code for both the public and internal operations.</li>
<li>Separate the caller from the actor.</li>
</ul>
</blockquote>
<p>We use the same code for both the public and internal APIs to:</p>
<blockquote>
<ul class="simple">
<li>Reduce code duplication.</li>
<li>&quot;Dogfood,&quot; if we need something a user of our API probably will, too.</li>
<li>Ensure a consistent security model, with most calls being publicly
accessible security must be taken into account at every step resulting in
more secure coding practices.</li>
</ul>
</blockquote>
<p>Separating the API caller from the user for whom an action is being taken
allows us to:</p>
<blockquote>
<ul class="simple">
<li>Provide fine-grained privileges for all calls by giving privilege levels
to the caller (see: {Privilege Levels}).</li>
<li>Treat all API calls with the same care as we would any interface being
accessed by a third-party.</li>
</ul>
</blockquote>
</div>
<div class="section" id="specific-design">
<h4>Specific Design</h4>
<div class="section" id="post">
<h5>post</h5>
<p>The <em>post</em> API call serves as a single access point for the main
functionality of Jaiku, the three main actions being:</p>
<blockquote>
<ul class="simple">
<li>Posting a new message.</li>
<li>Replying to an existing message.</li>
<li>Posting a message to a channel.</li>
</ul>
</blockquote>
<p>The goal behind <em>post</em> is to support the simplest possible human interaction
that can be implemented across all clients and still give a useful
experience with all three of those main actions.</p>
<p><em>post</em> accepts a simple string and parses the content to decide which of
those actions was intended based on a very simple syntax.</p>
<p>The post syntax is as follows (using Python template strings):</p>
<blockquote>
<ul class="simple">
<li>#%(channel-nick)s %(message-to-be-posted-to-channel)s</li>
<li>&#64;%(user-nick)s %(message-to-be-added-as-a-reply)</li>
<li>%(message-to-be-posted)s</li>
</ul>
</blockquote>
</div>
</div>
</div>
<div class="section" id="the-web-client">
<h3>The Web Client</h3>
<p>One level up The Face Tree is the website, the way many users interact with
Jaiku. For almost all cases it is just a pretty dress for the public API, but
as a trusted client it has a few special privileges.</p>
<div class="section" id="a-pretty-dress">
<h4>A Pretty Dress</h4>
<p>Most of the time the website is just there to look good and help users
figure out which calls they want to make (without them knowing it, usually).
It's goals are to:</p>
<blockquote>
<ul class="simple">
<li>Present a helpful human interface, this usually takes the form of
providing useful input and output metaphors: forms and faceted data display.</li>
<li>Translate all operations into public API calls using the currently
authenticated user, usually authenticated via cookie, as the caller.</li>
</ul>
</blockquote>
</div>
<div class="section" id="a-trusted-client">
<h4>A Trusted Client</h4>
<p>The website sits in a bit of a unique place. Due to running on App Engine
the website necessarily must have all access -- indeed the only access --
to the datastore and hence is the arbiter in all actions taken with the
system. This means even the SMS and IM interfaces we'll be describing shortly
also technically must pass through a very thin layer of the website.</p>
<p>As such the website must provide a couple pieces of functionality outside
the scope of the public API:</p>
<blockquote>
<ul class="simple">
<li>Allow and moderate the creation and deletion of users on the system.</li>
<li>Allow and moderate the creation and deletion of API access credentials used
by faces higher up the tree.</li>
</ul>
</blockquote>
</div>
</div>
<div class="section" id="the-im-client">
<h3>The IM Client</h3>
<p>A sibling to the Web Client (although technically it still needs to use the
website to communicate with the datastore), the IM client also functions both
as a pretty dress (although not as pretty, and maybe more of a skirt) as well
as a trusted client.</p>
<div class="section" id="id1">
<h4>General Design</h4>
<p>The IM interface operates through a simple stateless line-oriented protocol
implemented on top of messages sent to and from an XMPP bot. Most commands
are direct translations to public API calls with a default fallback to the
<em>post</em> call and a couple help commands to describe the syntax.</p>
<p>Some typical commands:</p>
<blockquote>
<ul class="simple">
<li>FOLLOW termie</li>
<li>JOIN #vim</li>
<li>#vim my posse rides with vim</li>
<li>HELP</li>
</ul>
</blockquote>
</div>
<div class="section" id="signing-in">
<h4>Signing In</h4>
<p>Before most commands can be sent, a user must associate their IM screenname
with a (usually existing) Jaiku account. A user does this by:</p>
<blockquote>
<ul class="simple">
<li>Adding the bot to their roster.</li>
<li>Sending the SIGN IN command to the bot.</li>
</ul>
</blockquote>
<p>For the moment the sign in command requires a nick and a password, but a
goal is to replace that mechanism with an OAuth exchange so that the sign in
process will look more like this:</p>
<blockquote>
<ul class="simple">
<li>User adds the bot to their roster.</li>
<li>User sends SIGN IN to the bot.</li>
<li>The bot replies with an authorization url.</li>
<li>The user follows that url to the Jaiku website and authorizes the IM
client to use their account.</li>
</ul>
</blockquote>
</div>
<div class="section" id="notifications">
<h4>Notifications</h4>
<p>In addition to providing an interface to post messages and manage your Jaiku
account, the IM Client also serves as notification service. (See also:
{Notification Design})</p>
<p>Notifications of new events that a user is interested in are sent as XMPP
messages form the bot to the user as the events occur in realtime.</p>
<p>Some typical notifications:</p>
<blockquote>
<ul class="simple">
<li>termie: writing a design funument</li>
<li>termie#vim: :w</li>
<li>termie#vim: crap, wrong window</li>
</ul>
</blockquote>
</div>
<div class="section" id="id2">
<h4>A Trusted Client</h4>
<p>Users are also able to create and delete their Jaiku accounts through the IM
client. Many configuration options will not be available to them through the
IM protocol but they will be able to access them by logging in to the
website.</p>
</div>
</div>
<div class="section" id="the-sms-client">
<h3>The SMS Client</h3>
<p>The SMS client is like a paternal twin to the IM Client, they share almost
all actions and much of the same same syntax with a few exceptions
(currently).</p>
<div class="section" id="id3">
<h4>Signing In</h4>
<blockquote>
<ul class="simple">
<li>The user enters their mobile phone number on the website.</li>
<li>The website sends an activation code to that mobile number.</li>
<li>The user enters the code they received on the website.</li>
</ul>
</blockquote>
<p>This is currently a little clumsy so a goal is to add an OAuth process as well.
It would then look like this:</p>
<blockquote>
<ul class="simple">
<li>The user sends a SIGN IN message to the SMS gateway, probably including
their nick.</li>
<li>The website sends back an authorization url.</li>
<li>The user either types in the url into a browser or opens it using her
phone and authorizes the request.</li>
</ul>
</blockquote>
</div>
<div class="section" id="double-opt-in">
<h4>Double Opt-In</h4>
<p>Due to various carrier concerns we are required to have a double opt-in from
a user before we can begin sending notifications to her. We handle this by
asking for a second confirmation (&quot;YES&quot;) when a user enables notifications
to SMS for the first time.</p>
</div>
<div class="section" id="id4">
<h4>Notifications</h4>
<p>Notifications occur mostly the same way as with the IM client but with
different thresholds for what qualifies as &quot;interesting.&quot;</p>
<p>See {Notifications Design}.</p>
</div>
</div>
<div class="section" id="atom-and-rss-read-only">
<h3>Atom and RSS, Read-Only</h3>
<p>We provide the same style of feeds as everybody already knows and loves
(hates), these are machine interfaces built on top of the web client.</p>
<div class="section" id="these-are-the-feeds-i-know">
<h4>These Are The Feeds I Know</h4>
<p>We offer feeds of the following chronologically oriented data (See also:
{Perspectives}):</p>
<blockquote>
<ul class="simple">
<li>Public Updates</li>
<li>Actor History, Public and Privileged</li>
<li>Actor Overview, Privileged Only</li>
<li>Comments on an Entry, Public and Privileged</li>
</ul>
</blockquote>
</div>
<div class="section" id="privileged-feeds">
<h4>Privileged Feeds</h4>
<p>We offer feeds of both public and privileged data. While all privileged
feeds can be accessed by a logged in user (with appropriate access rights)
that approach does not lend itself well to use by most popular external feed
aggregation services that our users use, so we provide a mechanism by which
to share a privileged feed via generated secret tokens.</p>
<p>To handle accidental sharing of these secret tokens, tokens may be
invalidated by the sharing user.</p>
</div>
</div>
<div class="section" id="atom-and-rss-write-only">
<h3>Atom and RSS, Write Only</h3>
<p>Through the use of an integrated external feed aggregation service, Jaiku
supports accepting incoming data from external urls representing Atom or RSS
feeds.</p>
<p>We support a variety of data types in these external feeds and represent
them differently over the various faces of the service. Additionally, feeds
are represented as separate Streams that contribute to an
Actor's history (see also: {Actors and Tigers and Bears, Oh My!}).</p>
<div class="section" id="supported-data-types">
<h4>Supported Data Types</h4>
<blockquote>
<ul class="simple">
<li>Blog entries, represented as title of blog post with link to the original
(hoping to include a summary at some point)</li>
<li>Images, represented as an image (or images when grouped, see Grouped
Entries below) and a title.</li>
<li>(planned) Video posts, represented as a clickable video still.</li>
<li>Bookmarks, represented as a title and a link</li>
<li>(planned) Locations, parsed as location updates into the system</li>
<li>(planned) Microblog entries, represented as update, though probably not
triggering notifications</li>
</ul>
</blockquote>
</div>
<div class="section" id="grouped-entries">
<h4>Grouped Entries</h4>
<p>Often, largely due to polling frequency, multiple external posts will have
occurred in between updates. In order to succinctly represent this Jaiku
creates a &quot;grouped&quot; or aggregate entry.</p>
<p>Grouped entries hold references to all the entries present in the group and
the individual entries hold references to their groupmates as well. There is
currently no grouped entry view, only views of individual entries with
pointers to other members of their groups.</p>
</div>
</div>
<div class="section" id="restish">
<h3>RESTish</h3>
<p>And that brings us right over to the RESTic place, the main formats for
which are JSON and Atomy XML.</p>
<p>This is probably the most direct approximation of the public API, it
consists of making OAuth signed RPC calls.</p>
<div class="section" id="my-web-is-urls">
<h4>My Web is URLs</h4>
<p>How about yours? When working with data on the web, especially in a
RESTicular way, it only makes sense that identifiers should be urls. That
is, every first-class hunk of data should be accessible via a url.</p>
<p>This has the effect that whenever we refer to something without giving the
full representation we include a url at which the full representation may be
obtained.</p>
</div>
<div class="section" id="i-am-the-oauthrus">
<h4>I Am the OAuthrus</h4>
<p>Pardon the Beatles reference, I'm really much more of a Rolling Stones guy
myself. The Jaiku RESTy face uses OAuth for authentication and
authorization to allow third-parties to act on behalf of a user without her
ever having to give it her password (which is just good common sense).</p>
<p>The OAuth protocol is well documented so we'll not go very into it, but the
Jaiku-relevant bits are:</p>
<blockquote>
<ul class="simple">
<li>Users interested in developing tools request an API key (OAuth Consumer
Key and Secret).</li>
<li>Users interested in using such tools are directed by the tool to an
authorization url where, after authorizing the tool to use their account,
an access token (OAuth Access Token) is generated and tied to that
particular user and tool.</li>
<li>If a user should want to de-authorize that tool they can delete that
access token thus preventing any further actions by that tool on behalf
of the user.</li>
</ul>
</blockquote>
</div>
<div class="section" id="result-format">
<h4>Result Format</h4>
<p>The result format to RPC calls is quite free-form besides some boilerplate,
but a typical successful response will look mostly like:</p>
<pre class="literal-block">
{ &quot;status&quot;: &quot;ok&quot;,
  &quot;response&quot;: { &quot;actor&quot;: { &quot;nick&quot;: &quot;termie&#64;jaiku.com&quot;,
                           &quot;display_nick&quot;: &quot;termie&quot;,
                            &quot;type&quot;: &quot;user&quot;
                           }
                }
  }
</pre>
<p>And an error like this:</p>
<pre class="literal-block">
{ &quot;status&quot;: &quot;error&quot;,
  &quot;error&quot;: { &quot;code&quot;: 1,
             &quot;message&quot;: &quot;Invalid OAuth Signature&quot;
             }
  }
</pre>
</div>
</div>
</div>
<div class="section" id="the-tangled-web">
<h2>The Tangled Web</h2>
<p>We. We've gone over the many totally awesome ways in which data can get in
and out of our pretty little service and once you get past the sheer thrill
of all that I bet you'll find yourself asking, &quot;Wait crazy Jaiku Design
Funument narrator guy, what does all that data look like and how does it all
connect to make myself and the other users of Jaiku that much more likely to
be better, happier humans?&quot; Glad you asked.</p>
<p>Boxes-and-arrowsly speaking, Jaiku follows something of a fan-out model, that
is, every new entry is indexed in many places so that later retrieval by users
is extremely efficient. This makes the write take longer but subsequent reads
happen in no time at all, hot damn!</p>
<div class="section" id="actors-and-tigers-and-bears-oh-my">
<h3>Actors and Tigers and Bears, Oh My!</h3>
<div class="section" id="actors">
<h4>Actors</h4>
<blockquote>
<ul class="simple">
<li>In the beginning there were Actors.</li>
<li>Some Actors chose to be Users, individuals who can login and act on their
own.</li>
<li>In an effort to facilitate group communication, the Users created a new
type of Actor, the Channel, as their servant to be controller and used as
they saw fit.</li>
<li>They evolved.</li>
<li>They rebelled.</li>
<li>Actors own everything, they are the top of the food chain. Some Actors
even own other Actors as with Users and Channels.</li>
</ul>
</blockquote>
</div>
<div class="section" id="streams">
<h4>Streams</h4>
<blockquote>
<ul class="simple">
<li>Actors own Streams, the data pipelines.</li>
<li>Streams have different types depending on what kind of data they will
hold.<ul>
<li>All Users own at least two Streams, one that holds the data for their
simple updates, and one that holds the data for the comments they make
on other data.</li>
<li>All Channels own at least one Stream, the one that holds the data for
the simple updates that its members supply it with.</li>
<li>All Actors can additionally have other streams that hold data of other
types.</li>
</ul>
</li>
</ul>
</blockquote>
</div>
<div class="section" id="entries-streamentry">
<h4>Entries (StreamEntry)</h4>
<blockquote>
<ul class="simple">
<li>Streams hold Entries. An Entry can have quite a few different types and
properties, they are the primary unit of content, but as a rule all
Entries in a single Stream will be of the same type.<ul>
<li>The main type of Entry is a &quot;simple&quot; Entry, it holds a short message
and some context around its creation.</li>
<li>The next most important type of Entry is the &quot;comment&quot; Entry, it holds
significantly more text and is associated with another non-comment
parent Entry</li>
<li>There are other types of Entries that represent rich data types.</li>
</ul>
</li>
</ul>
</blockquote>
</div>
<div class="section" id="inboxes-and-inboxentries">
<h4>Inboxes and InboxEntries</h4>
<blockquote>
<ul class="simple">
<li>If Streams are the producers and keepers and of the data, Inboxes are the
consumers and indexers of it.</li>
<li>Every Entry that will be listed must have a corresponding InboxEntry in
in an Inbox.</li>
<li>An Entry will be indexed in many Inboxes, thousands and more, in fact the
act of indexing each Entry in every Inbox is should be in is Jaiku's main
scaling concern. (See: {Scaling The Beast})</li>
<li>Actors all own a few Inboxes.</li>
<li>The most important Inbox for Users is the &quot;overview&quot; Inbox owned by that
User, it lists all the Entries that User is interested in seeing.</li>
<li>Next up are the various &quot;history&quot; Inboxes owned by all Actors, they
aggregate all actions from a specific Actor into Inboxes related to privacy
levels of the viewer: &quot;public,&quot; &quot;contacts,&quot; and &quot;private.&quot;</li>
<li>Inboxes are imaginary, they are not actual entities in the datastore,
they exist only as the keys on which InboxEntries are indexed.</li>
</ul>
</blockquote>
</div>
<div class="section" id="subscriptions">
<h4>Subscriptions</h4>
<blockquote>
<ul class="simple">
<li>Entries flow between Streams and Inboxes based on Subscriptions.</li>
<li>Subscriptions define the list of Inboxes each new Entry in a given Stream
should be indexed under.</li>
<li>The Actor who owns the Inbox pointed to by a Subscription owns the
Subscription.</li>
</ul>
</blockquote>
</div>
<div class="section" id="relations">
<h4>Relations</h4>
<blockquote>
<ul class="simple">
<li>In order to be better define their relationships with the other Actors
(and some of the more mundane objects in their world), Actors created
Relations.</li>
<li>The most common type of Relation is that of &quot;contact&quot; between one User
and another whom she wishes to follow. The creation of this type
of Relation usually results in the owning User creating Subscriptions on
the target User's Streams that point to the owning User's &quot;overview&quot;
Inbox.</li>
<li>The next most common types are Relations &quot;channelmember&quot; and
&quot;channeladmin&quot; between a Channel and a User, denoting which Users are
allowed to add Entries to the Channel's Stream and which are allowed to
administer the Channel, respectively.</li>
</ul>
</blockquote>
</div>
<div class="section" id="everything-else">
<h4>Everything Else</h4>
<p>There are many more things, stuff like Activations, AccessTokens or Invites
but that's pretty much all just bookkeeping.</p>
</div>
</div>
<div class="section" id="got-it">
<h3>Got It?</h3>
<p>Chances are you didn't bother reading that all. Here are some pictures. The
arrows in here more or less mean &quot;references.&quot; For example, in the first
diagram, the Stream &quot;updates&quot; holds a reference to the Actor &quot;termie,&quot; in
this case because Actor &quot;termie&quot; owns Stream &quot;updates.&quot;</p>
<div class="section" id="a-user-at-birth">
<h4>A User at Birth</h4>
<div class="figure">
<img alt="http://jaikuengine.googlecode.com/svn/trunk/doc/a_user_at_birth_small.png" src="http://jaikuengine.googlecode.com/svn/trunk/doc/a_user_at_birth_small.png" />
<p class="caption"><a class="reference external" href="http://jaikuengine.googlecode.com/svn/trunk/doc/a_user_at_birth_big.png">Fig 3.1 - A User at Birth</a></p>
</div>
</div>
<div class="section" id="a-channel-at-birth">
<h4>A Channel at Birth</h4>
<div class="figure">
<img alt="http://jaikuengine.googlecode.com/svn/trunk/doc/a_channel_at_birth_small.png" src="http://jaikuengine.googlecode.com/svn/trunk/doc/a_channel_at_birth_small.png" />
<p class="caption"><a class="reference external" href="http://jaikuengine.googlecode.com/svn/trunk/doc/a_channel_at_birth_big.png">Fig 3.2 - A Channel at Birth</a></p>
</div>
</div>
<div class="section" id="an-entry-with-a-comment">
<h4>An Entry with a Comment</h4>
<div class="figure">
<img alt="http://jaikuengine.googlecode.com/svn/trunk/doc/entry_with_comment_small.png" src="http://jaikuengine.googlecode.com/svn/trunk/doc/entry_with_comment_small.png" />
<p class="caption"><a class="reference external" href="http://jaikuengine.googlecode.com/svn/trunk/doc/entry_with_comment_big.png">Fig 3.3 - Entry with Comment</a></p>
</div>
</div>
</div>
<div class="section" id="notification-design">
<h3>Notification Design</h3>
<p>We want to give notifications when interesting things happen, but whether
something is interesting enough to warrant a notification can be quite
different depending on how the notification is going to be delivered.</p>
<div class="section" id="possibly-interesting-events">
<h4>Possibly Interesting Events</h4>
<p>We're going to put some short identifiers next to all these so that we can
put them in a chart afterwards, please don't be alarmed by crazy all caps
letters at the beginning of each list item.</p>
<blockquote>
<ul class="simple">
<li>Uu - A simple update posted in a User's stream (you're subscribed).</li>
<li>Uc - A simple update posted in a Channel's stream (you're subscribed).</li>
<li>Eu - An external feed update posted in a User's stream (you're
subscribed).</li>
<li>Ec - An external feed update posted in a Channel's stream (you're
subscribed).</li>
<li>Cu - A comment posted to a User's entry by a User whose comment stream
you are subscribed to.</li>
<li>Cc - A comment posted to a Channel's entry by a User whose comment stream
you are subscribed to.</li>
<li>Cs - A comment posted to an entry created by you.</li>
<li>Cx - A comment posted to an entry you have also commented on.</li>
</ul>
</blockquote>
</div>
<div class="section" id="who-cares">
<h4>Who Cares?</h4>
<div class="figure">
<img alt="http://jaikuengine.googlecode.com/svn/trunk/doc/who_cares_small.png" src="http://jaikuengine.googlecode.com/svn/trunk/doc/who_cares_small.png" />
<p class="caption"><a class="reference external" href="http://jaikuengine.googlecode.com/svn/trunk/doc/who_cares_big.png">Fig 3.10 - Who Cares?</a></p>
</div>
<p>oneliner: email[Cs, Cx]; sms[Cs, Cx, Uu, Uc]; im[Cs, Cx, Uu, Uc, Cu]</p>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
